<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>PlanteFuel 12-Week Transformation</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <style>
    :root {
      --bg: #050608;
      --card: #11151c;
      --accent: #38d46f;
      --accent-soft: rgba(56, 212, 111, 0.15);
      --text: #f5f5f5;
      --muted: #9ca3af;
      --danger: #f97373;
      --border: #1f2933;
      --radius: 12px;
      --font: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI",
        sans-serif;
    }

    * {
      box-sizing: border-box;
    }

    body {
      margin: 0;
      padding: 0;
      font-family: var(--font);
      background: radial-gradient(circle at top, #111827, #020617);
      color: var(--text);
    }

    .app {
      max-width: 1100px;
      margin: 0 auto;
      padding: 16px 16px 32px;
    }

    header {
      margin-bottom: 16px;
    }

    h1 {
      margin: 0;
      font-size: 1.9rem;
      letter-spacing: 0.04em;
      text-transform: uppercase;
    }

    .subtitle {
      margin-top: 4px;
      font-size: 0.9rem;
      color: var(--muted);
    }

    .badge-row {
      margin-top: 8px;
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
    }

    .badge {
      font-size: 0.75rem;
      padding: 4px 10px;
      border-radius: 999px;
      border: 1px solid var(--border);
      background: rgba(15, 23, 42, 0.9);
      color: var(--muted);
    }

    .badge-accent {
      border-color: var(--accent);
      background: var(--accent-soft);
      color: var(--accent);
      font-weight: 600;
    }

    /* Tabs */

    .tabs {
      display: flex;
      flex-wrap: wrap;
      gap: 6px;
      margin-bottom: 12px;
      border-bottom: 1px solid var(--border);
      padding-bottom: 4px;
    }

    .tab {
      border-radius: 999px;
      padding: 6px 12px;
      font-size: 0.85rem;
      cursor: pointer;
      border: 1px solid transparent;
      color: var(--muted);
      background: transparent;
      display: inline-flex;
      align-items: center;
      gap: 6px;
    }

    .tab.active {
      border-color: var(--accent);
      background: var(--accent-soft);
      color: var(--accent);
    }

    .tab span.icon {
      font-size: 1rem;
    }

    .tab-content {
      margin-top: 12px;
    }

    .card {
      background: rgba(15, 23, 42, 0.96);
      border-radius: var(--radius);
      border: 1px solid var(--border);
      padding: 16px;
      box-shadow: 0 14px 40px rgba(0, 0, 0, 0.4);
    }

    .card + .card {
      margin-top: 12px;
    }

    h2 {
      margin: 0 0 8px;
      font-size: 1.2rem;
    }

    h3 {
      margin: 0 0 6px;
      font-size: 1rem;
    }

    p {
      margin: 0 0 6px;
      font-size: 0.9rem;
      color: var(--muted);
    }

    .grid-2 {
      display: grid;
      grid-template-columns: repeat(2, minmax(0, 1fr));
      gap: 10px;
    }

    .grid-3 {
      display: grid;
      grid-template-columns: repeat(3, minmax(0, 1fr));
      gap: 10px;
    }

    @media (max-width: 768px) {
      .grid-2,
      .grid-3 {
        grid-template-columns: 1fr;
      }
    }

    label {
      display: block;
      font-size: 0.8rem;
      color: var(--muted);
      margin-bottom: 2px;
    }

    input[type="text"],
    input[type="number"],
    textarea,
    select {
      width: 100%;
      padding: 6px 8px;
      font-size: 0.88rem;
      border-radius: 8px;
      border: 1px solid var(--border);
      background: #020617;
      color: var(--text);
      outline: none;
    }

    textarea {
      min-height: 60px;
      resize: vertical;
    }

    input:focus,
    textarea:focus,
    select:focus {
      border-color: var(--accent);
      box-shadow: 0 0 0 1px var(--accent-soft);
    }

    .row {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      align-items: center;
    }

    .row > * {
      flex: 1;
    }

    .btn-row {
      margin-top: 10px;
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
    }

    button {
      border-radius: 999px;
      border: 1px solid transparent;
      padding: 6px 14px;
      font-size: 0.9rem;
      cursor: pointer;
      background: #111827;
      color: var(--text);
      display: inline-flex;
      align-items: center;
      gap: 6px;
    }

    button.btn-primary {
      background: var(--accent);
      color: #02140a;
      font-weight: 600;
    }

    button.btn-outline {
      border-color: var(--border);
    }

    button.btn-danger {
      border-color: var(--danger);
      color: var(--danger);
      background: transparent;
    }

    button:disabled {
      opacity: 0.4;
      cursor: default;
    }

    .hint {
      font-size: 0.75rem;
      color: var(--muted);
      margin-top: 2px;
    }

    table {
      width: 100%;
      border-collapse: collapse;
      font-size: 0.78rem;
    }

    th,
    td {
      padding: 6px 4px;
      text-align: left;
      border-bottom: 1px solid var(--border);
    }

    th {
      font-weight: 600;
      color: var(--muted);
    }

    tr:nth-child(even) td {
      background: rgba(15, 23, 42, 0.7);
    }

    .tag-success {
      color: var(--accent);
      font-size: 0.75rem;
    }
  </style>
</head>
<body>
  <div class="app">
    <header>
      <h1>PlanteFuel 12-Week Transformation</h1>
      <div class="subtitle">Grit. Power. Purpose. â€¢ Days 1-84 â€¢ Local-only data (saved in your browser)</div>
      <div class="badge-row">
        <div class="badge badge-accent">Daily Logs</div>
        <div class="badge">Keto + Fasting</div>
        <div class="badge">BP & Pulse Tracking</div>
        <div class="badge">Workout Logging</div>
        <div class="badge">Motivation Engine</div>
      </div>
    </header>

    <!-- Tabs -->
    <nav class="tabs">
      <button class="tab active" data-tab="overview">
        <span class="icon">ğŸ</span> Overview
      </button>
      <button class="tab" data-tab="daily">
        <span class="icon">ğŸ“†</span> Daily Log
      </button>
      <button class="tab" data-tab="progress">
        <span class="icon">ğŸ“Š</span> Progress
      </button>
      <button class="tab" data-tab="workout">
        <span class="icon">ğŸ‹ï¸</span> Workout Plan
      </button>
      <button class="tab" data-tab="nutrition">
        <span class="icon">ğŸ¥‘</span> Nutrition
      </button>
      <button class="tab" data-tab="mealprep">
        <span class="icon">ğŸ±</span> Meal Prep
      </button>
      <button class="tab" data-tab="quotes">
        <span class="icon">âš¡</span> Quotes
      </button>
      <button class="tab" data-tab="checklists">
        <span class="icon">âœ…</span> Checklists
      </button>
      <button class="tab" data-tab="data">
        <span class="icon">ğŸ’¾</span> Data
      </button>
    </nav>

    <section class="tab-content">
      <!-- OVERVIEW -->
      <div id="tab-overview" class="card">
        <h2>Program Overview</h2>
        <p>
          12 weeks. 84 days. Daily discipline. This single page tracks your
          weight, BP/pulse, motivation, workouts, and eating â€” all saved in your
          browser using <strong>localStorage</strong>.
        </p>
        <div class="grid-2">
          <div>
            <h3>Phases</h3>
            <p><strong>Weeks 1â€“4:</strong> Foundation (routine, keto, walking, gym, sleep)</p>
            <p><strong>Weeks 5â€“8:</strong> Momentum (strength, stamina, discipline)</p>
            <p><strong>Weeks 9â€“12:</strong> Proof (visible change, identity shift)</p>
          </div>
          <div>
            <h3>Daily Non-Negotiables</h3>
            <ul>
              <li>Weigh-in + (optional) progress picture</li>
              <li>BP + Pulse logging</li>
              <li>Motivation line (PlanteFuel style)</li>
              <li>Workout log (walk + gym)</li>
              <li>Keto + fasting eating log</li>
            </ul>
          </div>
        </div>
        <p class="hint">
          Tip: Commit to filling the daily log every night, even if the day wasnâ€™t perfect.
        </p>
      </div>

      <!-- DAILY LOG -->
      <div id="tab-daily" class="card" style="display:none;">
        <h2>Daily Log</h2>
        <p>Choose a day (1â€“84), fill it out, and hit <strong>Save Day</strong>. Data stays in this browser.</p>

        <div class="row" style="margin-bottom:10px;">
          <div>
            <label for="daySelect">Day</label>
            <select id="daySelect"></select>
          </div>
          <div>
            <label>Phase (auto)</label>
            <input id="phaseDisplay" type="text" readonly />
          </div>
        </div>

        <div class="grid-3" style="margin-bottom:10px;">
          <div>
            <label for="weightInput">Weight (lbs)</label>
            <input id="weightInput" type="number" step="0.1" />
          </div>
          <div>
            <label for="bpSysInput">BP Systolic</label>
            <input id="bpSysInput" type="number" />
          </div>
          <div>
            <label for="bpDiaInput">BP Diastolic</label>
            <input id="bpDiaInput" type="number" />
          </div>
        </div>

        <div class="grid-2" style="margin-bottom:10px;">
          <div>
            <label for="pulseInput">Pulse</label>
            <input id="pulseInput" type="number" />
          </div>
          <div>
            <label for="photoCheck">Progress Picture Taken?</label>
            <select id="photoCheck">
              <option value="">â€”</option>
              <option value="yes">Yes</option>
              <option value="no">No</option>
            </select>
          </div>
        </div>

        <div style="margin-bottom:10px;">
          <label for="motivationInput">PlanteFuel Daily Motivation</label>
          <textarea id="motivationInput" placeholder="e.g., Discipline first, feelings later."></textarea>
        </div>

        <div style="margin-bottom:10px;">
          <label for="workoutInput">Workout / Movement</label>
          <textarea id="workoutInput" placeholder="Walked 1 mile to gym, Push day: Chest press 4x10 @ 100, etc."></textarea>
        </div>

        <div style="margin-bottom:10px;">
          <label for="eatingInput">Eating (Fasting window + meals)</label>
          <textarea id="eatingInput" placeholder="Fasted 6pmâ€“12pm. Meal 1: eggs + avocado. Meal 2: salmon + broccoli."></textarea>
        </div>

        <div style="margin-bottom:10px;">
          <label for="notesInput">Notes (energy, stress, gut, sleep)</label>
          <textarea id="notesInput" placeholder="Energy 7/10, stress 3/10, sleep 7hrs, gut felt calm."></textarea>
        </div>

        <div class="btn-row">
          <button class="btn-primary" id="saveDayBtn">
            ğŸ’¾ Save Day
          </button>
          <button class="btn-outline" id="clearDayBtn">
            ğŸ§¹ Clear This Day
          </button>
        </div>
        <p class="hint" id="saveStatus"></p>
      </div>

      <!-- PROGRESS -->
      <div id="tab-progress" class="card" style="display:none;">
        <h2>Progress (Overview)</h2>
        <p>
          This table pulls from your saved daily entries. If a day has weight or BP logged, it will appear as â€œloggedâ€.
        </p>
        <div style="max-height:420px; overflow:auto; margin-top:8px;">
          <table id="progressTable">
            <thead>
              <tr>
                <th>Day</th>
                <th>Phase</th>
                <th>Weight</th>
                <th>BP</th>
                <th>Pulse</th>
                <th>Photo?</th>
                <th>Logged?</th>
              </tr>
            </thead>
            <tbody>
              <!-- filled by JS -->
            </tbody>
          </table>
        </div>
      </div>

      <!-- WORKOUT PLAN -->
      <div id="tab-workout" class="card" style="display:none;">
        <h2>Workout Plan</h2>
        <p>Simple, repeatable structure that pairs with your walk-to-gym routine.</p>
        <div class="grid-2">
          <div>
            <h3>Weekly Split</h3>
            <ul>
              <li><strong>Mon:</strong> Push (Chest/Shoulders/Triceps)</li>
              <li><strong>Tue:</strong> Pull (Back/Biceps)</li>
              <li><strong>Wed:</strong> Legs</li>
              <li><strong>Thu:</strong> Core + Cardio</li>
              <li><strong>Fri:</strong> Full Body</li>
              <li><strong>Sat:</strong> 45â€“60 min walk</li>
              <li><strong>Sun:</strong> Rest + prep</li>
            </ul>
          </div>
          <div>
            <h3>Example Exercises</h3>
            <p><strong>Push:</strong> Chest press, shoulder press, triceps rope</p>
            <p><strong>Pull:</strong> Lat pulldown, seated row, curls</p>
            <p><strong>Legs:</strong> Leg press, ham curls, calves</p>
            <p><strong>Core:</strong> Planks, crunches, incline walk</p>
            <p><strong>Full Body:</strong> Light combo of all major groups</p>
          </div>
        </div>
        <p class="hint">
          Log exact sets/reps/weights in the Daily Log tab so you can track progression.
        </p>
      </div>

      <!-- NUTRITION -->
      <div id="tab-nutrition" class="card" style="display:none;">
        <h2>Nutrition & Fasting</h2>
        <p>High-level guide for your keto + fasting structure. Adjust with your clinician if needed.</p>
        <div class="grid-2">
          <div>
            <h3>Fasting</h3>
            <ul>
              <li>Target window: <strong>12 PM â€“ 6 PM</strong> eating</li>
              <li>Water, electrolytes in the morning</li>
              <li>No late-night food after 6 PM</li>
            </ul>
          </div>
          <div>
            <h3>Keto Structure</h3>
            <ul>
              <li>Proteins: eggs, beef, chicken, salmon, turkey</li>
              <li>Fats: avocado, olive oil, butter/ghee, nuts</li>
              <li>Veg: spinach, broccoli, cauliflower, zucchini, mixed greens</li>
              <li>Avoid: bread, pizza, sugar, beer, pasta, rice</li>
            </ul>
          </div>
        </div>
      </div>

      <!-- MEAL PREP -->
      <div id="tab-mealprep" class="card" style="display:none;">
        <h2>Meal Prep Rhythm</h2>
        <p>Two prep days run the whole week.</p>
        <div class="grid-2">
          <div>
            <h3>Sunday (Monâ€“Wed)</h3>
            <ul>
              <li>Egg muffins (12)</li>
              <li>Chicken thighs (baked)</li>
              <li>Ground beef crumble</li>
              <li>Roasted broccoli/cauliflower</li>
              <li>Avocados ready</li>
            </ul>
          </div>
          <div>
            <h3>Wednesday (Thuâ€“Sun)</h3>
            <ul>
              <li>Salmon filets</li>
              <li>Beef patties</li>
              <li>Hard-boiled eggs</li>
              <li>Zucchini + spinach sautÃ©</li>
            </ul>
          </div>
        </div>
      </div>

      <!-- QUOTES -->
      <div id="tab-quotes" class="card" style="display:none;">
        <h2>PlanteFuel Quotes</h2>
        <p>Use one daily as your motivation line in the Daily Log.</p>
        <ul>
          <li>â€œYou donâ€™t need more time, you need more truth.â€</li>
          <li>â€œDiscipline is how you apologize to your future self for wasting time before.â€</li>
          <li>â€œComfort is expensive. Discipline is a discount on every problem in your life.â€</li>
          <li>â€œYouâ€™re not starting over, youâ€™re starting from experience.â€</li>
          <li>â€œThe version of you that quits is not allowed in this 12-week story.â€</li>
          <li>â€œMotivation is a spark. Routine is the generator.â€</li>
          <li>â€œYour daughter doesnâ€™t need a perfect dad. She needs a consistent one.â€</li>
          <li>â€œEvery rep, every walk, every meal choice is a vote for your future.â€</li>
          <li>â€œYou canâ€™t hate the body youâ€™re trying to rebuild. Work on it, donâ€™t judge it.â€</li>
          <li>â€œMost people want results. Youâ€™re here to build identity.â€</li>
          <li>â€œStress is loud. Discipline is louder.â€</li>
          <li>â€œYouâ€™re not behind. Youâ€™re right on time if you start today.â€</li>
          <li>â€œThe scale measures weight. Your habits measure destiny.â€</li>
          <li>â€œFeeling tired is not a stop sign, itâ€™s a speed bump.â€</li>
          <li>â€œYou donâ€™t rise to the level of your goals, you fall to the level of your habits.â€</li>
          <li>â€œExcuses age fast. Discipline ages into legacy.â€</li>
          <li>â€œYouâ€™ve survived worse than a workout. Get under the bar.â€</li>
          <li>â€œA bad day inside the plan beats a â€˜perfectâ€™ day with no plan.â€</li>
          <li>â€œYour body remembers everything you practice. Make it remember strength.â€</li>
          <li>â€œYouâ€™re not stuck. Youâ€™re just one hard decision away from momentum.â€</li>
          <li>â€œQuit arguing for your limitations. Start arguing for your potential.â€</li>
          <li>â€œPain passes. Pride does not.â€</li>
          <li>â€œIf itâ€™s hard, that just means it counts more.â€</li>
          <li>â€œYour future self is watching this day like a highlight reel. Make it worth replaying.â€</li>
          <li>â€œNo one is coming to save youâ€”but everyone is watching what you do next.â€</li>
          <li>â€œTired is temporary. Regret is not.â€</li>
          <li>â€œYou donâ€™t need perfect macros. You need fewer lies to yourself.â€</li>
          <li>â€œYour comeback story doesnâ€™t start when you â€˜feel ready.â€™ It starts the day you stop stalling.â€</li>
          <li>â€œEvery time you donâ€™t quit, you teach your nervous system a new language: resilience.â€</li>
          <li>â€œThis is not a phase. This is who you were supposed to be the whole time.â€</li>
        </ul>
      </div>

      <!-- CHECKLISTS -->
      <div id="tab-checklists" class="card" style="display:none;">
        <h2>Daily & Weekly Checklists</h2>
        <div class="grid-2">
          <div>
            <h3>Daily</h3>
            <ul>
              <li>â˜ Weight</li>
              <li>â˜ BP & Pulse</li>
              <li>â˜ (Optional) progress picture</li>
              <li>â˜ Walk to gym</li>
              <li>â˜ 45-minute workout</li>
              <li>â˜ Walk home</li>
              <li>â˜ Fasting until first meal</li>
              <li>â˜ Meal 1 (keto)</li>
              <li>â˜ Meal 2 (keto)</li>
              <li>â˜ No food after 6 PM</li>
              <li>â˜ Night wind-down + magnesium</li>
              <li>â˜ Sleep by ~10:30 PM</li>
            </ul>
          </div>
          <div>
            <h3>Weekly</h3>
            <ul>
              <li>â˜ Sunday meal prep</li>
              <li>â˜ Wednesday mid-week prep</li>
              <li>â˜ Long walk Saturday</li>
              <li>â˜ Weekly photos</li>
              <li>â˜ Weekly weigh-in review</li>
              <li>â˜ Weekly reflection: What got better? What needs tightening?</li>
            </ul>
          </div>
        </div>
      </div>

      <!-- DATA TAB -->
      <div id="tab-data" class="card" style="display:none;">
        <h2>Data Tools</h2>
        <p>Export or reset your local data. This only affects this browser/device.</p>
        <div class="btn-row">
          <button class="btn-outline" id="exportBtn">â¬‡ï¸ Export Data (JSON)</button>
          <button class="btn-danger" id="resetAllBtn">ğŸ§¨ Reset All Data</button>
        </div>
        <p class="hint">
          Export will show your JSON in a prompt so you can copy & paste it somewhere safe.
          Reset wipes all 84 days in this browser (cannot be undone).
        </p>
      </div>
    </section>
  </div>

  <script>
    // ---------- DATA MODEL ----------
    const STORAGE_KEY = "plantefuel_12week_data_v1";

    function createEmptyDay(dayNumber) {
      return {
        day: dayNumber,
        weight: "",
        bpSys: "",
        bpDia: "",
        pulse: "",
        photo: "",
        motivation: "",
        workout: "",
        eating: "",
        notes: ""
      };
    }

    function loadAllDays() {
      const raw = localStorage.getItem(STORAGE_KEY);
      if (!raw) {
        const arr = [];
        for (let i = 1; i <= 84; i++) {
          arr.push(createEmptyDay(i));
        }
        return arr;
      }
      try {
        const parsed = JSON.parse(raw);
        // Ensure it still has 84 days
        const byDay = {};
        parsed.forEach(d => {
          byDay[d.day] = d;
        });
        const arr = [];
        for (let i = 1; i <= 84; i++) {
          arr.push(byDay[i] || createEmptyDay(i));
        }
        return arr;
      } catch (e) {
        console.error("Failed to parse storage", e);
        const arr = [];
        for (let i = 1; i <= 84; i++) {
          arr.push(createEmptyDay(i));
        }
        return arr;
      }
    }

    function saveAllDays(days) {
      localStorage.setItem(STORAGE_KEY, JSON.stringify(days));
    }

    let daysData = loadAllDays();

    // ---------- TABS ----------
    const tabs = document.querySelectorAll(".tab");
    const tabPanels = {
      overview: document.getElementById("tab-overview"),
      daily: document.getElementById("tab-daily"),
      progress: document.getElementById("tab-progress"),
      workout: document.getElementById("tab-workout"),
      nutrition: document.getElementById("tab-nutrition"),
      mealprep: document.getElementById("tab-mealprep"),
      quotes: document.getElementById("tab-quotes"),
      checklists: document.getElementById("tab-checklists"),
      data: document.getElementById("tab-data")
    };

    function showTab(name) {
      for (const t of tabs) {
        t.classList.toggle("active", t.dataset.tab === name);
      }
      for (const key in tabPanels) {
        tabPanels[key].style.display = key === name ? "block" : "none";
      }
      if (name === "progress") {
        renderProgressTable();
      }
    }

    tabs.forEach(tab => {
      tab.addEventListener("click", () => showTab(tab.dataset.tab));
    });

    // ---------- DAILY LOG UI ----------
    const daySelect = document.getElementById("daySelect");
    const phaseDisplay = document.getElementById("phaseDisplay");
    const weightInput = document.getElementById("weightInput");
    const bpSysInput = document.getElementById("bpSysInput");
    const bpDiaInput = document.getElementById("bpDiaInput");
    const pulseInput = document.getElementById("pulseInput");
    const photoCheck = document.getElementById("photoCheck");
    const motivationInput = document.getElementById("motivationInput");
    const workoutInput = document.getElementById("workoutInput");
    const eatingInput = document.getElementById("eatingInput");
    const notesInput = document.getElementById("notesInput");
    const saveDayBtn = document.getElementById("saveDayBtn");
    const clearDayBtn = document.getElementById("clearDayBtn");
    const saveStatus = document.getElementById("saveStatus");

    function getPhaseForDay(day) {
      if (day <= 28) return "Phase 1 â€“ Foundation";
      if (day <= 56) return "Phase 2 â€“ Momentum";
      return "Phase 3 â€“ Proof";
    }

    function populateDaySelect() {
      for (let i = 1; i <= 84; i++) {
        const opt = document.createElement("option");
        opt.value = i;
        opt.textContent = `Day ${i}`;
        daySelect.appendChild(opt);
      }
      daySelect.value = "1";
      phaseDisplay.value = getPhaseForDay(1);
    }

    function loadDayIntoForm(dayNumber) {
      const dayIdx = dayNumber - 1;
      const d = daysData[dayIdx];
      weightInput.value = d.weight || "";
      bpSysInput.value = d.bpSys || "";
      bpDiaInput.value = d.bpDia || "";
      pulseInput.value = d.pulse || "";
      photoCheck.value = d.photo || "";
      motivationInput.value = d.motivation || "";
      workoutInput.value = d.workout || "";
      eatingInput.value = d.eating || "";
      notesInput.value = d.notes || "";
      phaseDisplay.value = getPhaseForDay(dayNumber);
      saveStatus.textContent = "";
    }

    function saveCurrentDay() {
      const dayNumber = parseInt(daySelect.value, 10);
      const idx = dayNumber - 1;
      const d = daysData[idx];
      d.weight = weightInput.value.trim();
      d.bpSys = bpSysInput.value.trim();
      d.bpDia = bpDiaInput.value.trim();
      d.pulse = pulseInput.value.trim();
      d.photo = photoCheck.value;
      d.motivation = motivationInput.value.trim();
      d.workout = workoutInput.value.trim();
      d.eating = eatingInput.value.trim();
      d.notes = notesInput.value.trim();
      saveAllDays(daysData);
      saveStatus.textContent = `Saved Day ${dayNumber} âœ”`;
      setTimeout(() => {
        saveStatus.textContent = "";
      }, 2500);
    }

    function clearCurrentDay() {
      const dayNumber = parseInt(daySelect.value, 10);
      const idx = dayNumber - 1;
      daysData[idx] = createEmptyDay(dayNumber);
      saveAllDays(daysData);
      loadDayIntoForm(dayNumber);
      saveStatus.textContent = `Cleared Day ${dayNumber}`;
      setTimeout(() => {
        saveStatus.textContent = "";
      }, 2500);
    }

    daySelect.addEventListener("change", () => {
      const dayNumber = parseInt(daySelect.value, 10);
      loadDayIntoForm(dayNumber);
    });

    saveDayBtn.addEventListener("click", saveCurrentDay);
    clearDayBtn.addEventListener("click", clearCurrentDay);

    // ---------- PROGRESS TABLE ----------
    const progressTableBody = document.querySelector("#progressTable tbody");

    function renderProgressTable() {
      progressTableBody.innerHTML = "";
      daysData.forEach(d => {
        const tr = document.createElement("tr");
        const hasData =
          d.weight ||
          d.bpSys ||
          d.bpDia ||
          d.pulse ||
          d.motivation ||
          d.workout ||
          d.eating ||
          d.notes;

        const bpText =
          d.bpSys && d.bpDia ? `${d.bpSys}/${d.bpDia}` : "";

        tr.innerHTML = `
          <td>${d.day}</td>
          <td>${getPhaseForDay(d.day)}</td>
          <td>${d.weight || ""}</td>
          <td>${bpText}</td>
          <td>${d.pulse || ""}</td>
          <td>${d.photo === "yes" ? "ğŸ“¸" : ""}</td>
          <td>${hasData ? '<span class="tag-success">Logged</span>' : ""}</td>
        `;
        progressTableBody.appendChild(tr);
      });
    }

    // ---------- DATA EXPORT / RESET ----------
    const exportBtn = document.getElementById("exportBtn");
    const resetAllBtn = document.getElementById("resetAllBtn");

    exportBtn.addEventListener("click", () => {
      const data = JSON.stringify(daysData, null, 2);
      // Show in prompt for quick copy. Not elegant, but single-file friendly.
      alert("Copy the JSON from the next prompt and save it somewhere safe.");
      prompt("PlanteFuel 12-week JSON:", data);
    });

    resetAllBtn.addEventListener("click", () => {
      const yes = confirm(
        "This will erase ALL 84 days from this browser. This cannot be undone. Are you sure?"
      );
      if (!yes) return;
      const arr = [];
      for (let i = 1; i <= 84; i++) arr.push(createEmptyDay(i));
      daysData = arr;
      saveAllDays(daysData);
      const currentDay = parseInt(daySelect.value, 10) || 1;
      loadDayIntoForm(currentDay);
      renderProgressTable();
      alert("All data cleared for this browser.");
    });

    // ---------- INIT ----------
    populateDaySelect();
    loadDayIntoForm(1);
    renderProgressTable();
  </script>
</body>
</html>
